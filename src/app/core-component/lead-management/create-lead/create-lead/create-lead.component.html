<p-toast></p-toast>

<div class="row">
  <div class="col-lg-5 col-md-5 form-check"></div>
  <div class="col-lg-1 col-md-1 form-check">
    <input
      type="radio"
      class="btn-check"
      name="formName"
      value="vehicle"
      id="vehicle"
      autocomplete="off"
      checked
      (change)="onSelectionChange($event)"
    />
    <label class="btn" for="vehicle">Vehicle</label>
  </div>
  <div class="col-lg-1 col-md-1 form-check">
    <input
      type="radio"
      class="btn-check"
      name="formName"
      value="info"
      id="info"
      autocomplete="off"
      (change)="onSelectionChange($event)"
    />
    <label class="btn" for="info">Information</label>
  </div>
  <div class="col-lg-5 col-md-5 form-check">
    <input
      type="radio"
      class="btn-check"
      name="formName"
      value="activity"
      id="activity"
      autocomplete="off"
      (change)="onSelectionChange($event)"
    />
    <label class="btn" for="activity">Activity</label>
  </div>
</div>

<!-- --------------------------------------------------------------- This Is Info Div ------------------------------------------------------------------------------ -->
<div *ngIf="selectedOption === 'info'">
  <form [formGroup]="addLeadForm" (ngSubmit)="submitLeadForm()">
    <div class="card">
      <div class="card-body">
        <div class="new-employee-field">
          <div class="card-title-head">
            <h6>
              <span><i class="feather icon-info feather-edit"></i></span
              >Customer Details
            </h6>
          </div>
          <div class="row">
            <div class="col-lg-4 col-md-4">
              <div class="mb-3">
                <label class="form-label requiredField">Customer Name</label>
                <input
                  class="form-control"
                  type="text"
                  formControlName="customeName"
                  maxlength="100"
                />
              </div>
            </div>
            <div class="col-lg-1 col-md-1">
              <div class="mb-3">
                <label class="form-label requiredField">Dial Code</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="countryDialCode"
                  required
                />
              </div>
            </div>
            <div class="col-lg-3 col-md-3">
              <div class="mb-3">
                <label class="form-label requiredField">Customer Mobile</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="customerMobile"
                  required
                />
              </div>
            </div>
            <div class="col-lg-4 col-md-4">
              <div class="mb-3">
                <label class="form-label requiredField">Category Type</label>
                <mat-select
                  formControlName="categoryTypeId"
                  class="select"
                  placeholder="Select Category Type"
                  (selectionChange)="getSuperCategory($event.value)"
                  required
                >
                  <app-mat-select-search
                    (filteredList)="setFilterList($event, 'categoryType')"
                    [originalList]="categoryTypeList"
                    [categoryName]="'categoryTypeName'"
                  >
                  </app-mat-select-search>
                  <mat-option
                    *ngFor="let cateType of filteredCategoryTypeList"
                    [value]="cateType"
                  >
                    {{ cateType.categoryTypeName }}
                  </mat-option>
                </mat-select>
              </div>
            </div>
            <input
              type="text"
              class="form-control"
              formControlName="status"
              value="INFO"
            />
          </div>
        </div>
      </div>
    </div>
    <div class="text-mid mb-3">
      <button type="submit" class="btn btn-submit">Save Info</button>
    </div>
  </form>
</div>

<!-- --------------------------------------------------------------- This Is Vehicle Div --------------------------------------------------------------------------- -->
<div *ngIf="selectedOption === 'vehicle'">
  <form [formGroup]="addLeadForm" (ngSubmit)="submitLeadForm()">
    <div class="card">
      <div class="card-body">
        <div class="new-employee-field">
          <br />

          <div class="vehicle-section">
            <div class="row justify-content-center mb-3 row-1">
              <div class="col-lg-3 col-md-3">
                <div class="mb-3">
                  <mat-select
                    formControlName="categoryId"
                    class="select custom-mat-select no-border input-inside-element form-control"
                    placeholder="Select a Package"
                    (selectionChange)="getSubCategory($event.value)"
                    required
                  >
                    <app-mat-select-search
                      (filteredList)="setFilterList($event, 'category')"
                      [originalList]="filteredCategoryList"
                      [categoryName]="'pickLocation'"
                    ></app-mat-select-search>
                    <mat-option
                      *ngFor="let cate of filteredCategoryList"
                      [value]="cate"
                    >
                      {{ cate.category }}
                    </mat-option>
                  </mat-select>
                  <!-- </div> -->
                </div>
              </div>

              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <!-- <div class="round-input sample-color custom-height d-flex wrapper"> -->

                  <!-- <label class="form-label requiredField">Variant</label> -->
                  <mat-select
                    formControlName="subCategoryId"
                    class="select custom-mat-select no-border input-inside-element"
                    placeholder="Select Variant"
                    (selectionChange)="setSecurityAndVendorRate($event)"
                    required
                  >
                    <mat-option
                      *ngFor="let subCate of filteredSubCategoryList"
                      [value]="subCate"
                    >
                      {{ subCate.subCategory }}
                    </mat-option>
                  </mat-select>

                  <!-- <span class="dropdown-icon">&#x25BC;</span> -->
                  <!-- </div> -->
                </div>
              </div>

              <!-- <div class="col-lg-6 col-md-6 ">
              <div class="mb-3">
                <label class="form-label requiredField datepicker-label-first">Pickup Date & Time</label>
                 <label class="form-label requiredField days-lebel">Days</label>
                <label for="dropoffDate" class="form-label requiredField datepicker-label-second">Drop-off Date & Time</label>
                <div class="booking-container rounded-input">
                  <div class="date-time-group">
                    
                    <input type="datetime-local" formControlName="pickupDateTime" id="pickupDate" name="pickupDate"
                      step="900" [min]="minDate" [value]="pickupDate" (blur)="calculateDays()" class="datetimepick" />
                  </div>

                  <div class="days-diff">
                    <input type="number" class="form-control no-border days-no" formControlName="totalDays" required
                      (change)="calculateTotalAmount()" />
                  </div>

                  <div class="date-time-group">
                    <input type="datetime-local" formControlName="dropDateTime" id="dropDateTime" name="dropDateTime"
                      step="900" [min]="minDate" [value]="pickupDate" (blur)="calculateDays()" class="datetimepick" />
                  </div>
                </div>
              </div>
            </div> -->

              <div class="col-lg-5 col-md-5">
                <div class="mb-3">
                  <div class="booking-container ">
                    <div class="w-36">
                      <label for="pickupDate" class="grey-text "
                        >Pickup Date & Time</label
                      >
                      <!-- <input type="datetime-local" id="pickupDate" name="pickupDate" step="900"[min]="minDate" [value]="pickupDate" (change)="onDateChange($event, 'pickupDate')"class="datetimepick" /> -->
                      <input
                        type="datetime-local"
                        formControlName="pickupDateTime"
                        id="pickupDate"
                        name="pickupDate"
                        step="900"
                        [min]="minDate"
                        [value]="pickupDate"
                        (blur)="calculateDays()"
                        class="datetimepick"
                      />
                      <div class="error" *ngIf="pickupError">
                        {{ pickupError }}
                      </div>
                    </div>

                    <div class="days-diff">
                      <div type="text" class="form-control no-border days-no">
                        <!-- {{ daysDifference }} days -->
                        <input
                          type="number"
                          class="form-control no-border days-no"
                          formControlName="totalDays"
                          required
                          (change)="calculateTotalAmount()"
                        />
                      </div>
                    </div>

                    <div class="date-time-group">
                      <label
                        for="dropoffDate"
                        class="grey-text datepicker-label"
                        >Drop-off Date & Time</label
                      >
                      <!-- <input type="datetime-local" id="dropoffDate" name="dropoffDate" step="900" [min]="pickupDate" [value]="dropoffDate"(change)="onDateChange($event, 'dropoffDate')" class="datetimepick"/> -->
                      <input
                        type="datetime-local"
                        formControlName="dropDateTime"
                        id="dropDateTime"
                        name="dropDateTime"
                        step="900"
                        [min]="this.addLeadForm.value.pickupDateTime"
                        [value]="dropoffDate"
                        (blur)="calculateDays()"
                        class="datetimepick"
                      />
                      <div class="error" *ngIf="dropoffError">
                        {{ dropoffError }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="container">
              <div class="row justify-content-center row-2">
                <div class="col-lg-2 col-md-2">
                  <div class="mb-2">
                    <!-- <input type="text" class="form-control" placeholder="STD. Locations" required /> -->
                    <mat-select
                      formControlName="pickupLocation"
                      class="select custom-mat-select"
                      placeholder="Pickup Location"
                      required
                    >
                      <app-mat-select-search
                        (filteredList)="setFilterList($event, 'pickLocation')"
                        [originalList]="pickLocationList"
                        [categoryName]="'pickLocation'"
                      ></app-mat-select-search>
                      <mat-option
                        *ngFor="let pickList of filteredPickLocationList"
                        [value]="pickList.location"
                      >
                        {{ pickList.location }}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-2 col-md-2">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Pickup Point</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="pickupPoint"
                      required
                    />
                  </mat-form-field>
                </div>

                <div class="col-lg-2 col-md-2">
                  <div class="mb-2">
                    <!-- <input type="text" class="form-control"  placeholder="STD. Locations" required/> -->
                    <mat-select
                      formControlName="dropLocation"
                      placeholder="Drop Locations"
                      class="select custom-mat-select"
                      required
                    >
                      <app-mat-select-search
                        (filteredList)="setFilterList($event, 'dropLocation')"
                        [originalList]="dropLocationList"
                        [categoryName]="'dropLocation'"
                      ></app-mat-select-search>
                      <mat-option
                        *ngFor="let dropList of filteredDropLocationList"
                        [value]="dropList.location"
                      >
                        {{ dropList.location }}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-2 col-md-2">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Drop Point</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="dropPoint"
                      required
                    />
                  </mat-form-field>
                </div>
              </div>
            </div>

            <!-- hjhjkhkhkhjkhh -->

            <!-- ----------------------------Thrird Row --------------------------------------->
            <div class="container">
              <div class="row justify-content-center row-3">
                <div class="col-lg-2 col-md-2 input-col">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Quantity</mat-label>
                    <input
                      matInput
                      type="number"
                      formControlName="quantity"
                      min="0"
                      required
                    />
                  </mat-form-field>
                </div>

                <div class="col-lg-2 col-md-2 input-col">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Company Rate</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="companyRate"
                      required
                      (change)="calculateTotalAmount()"
                    />
                  </mat-form-field>
                </div>

                <div class="col-lg-2 col-md-2 input-col">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Vendor Rate</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="vendorRate"
                      required
                      (change)="calculateTotalAmount()"
                    />
                  </mat-form-field>
                </div>

                <div class="col-lg-2 col-md-2 input-col" *ngIf="!isActivities">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Total Delivery</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="deliveryAmountToCompany"
                      required
                      (change)="calculateTotalAmount()"
                    />
                  </mat-form-field>
                </div>

                <div class="col-lg-2 col-md-2 input-col">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Vendor Delivery</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="deliveryAmountToVendor"
                      required
                      (change)="calculateTotalAmount()"
                    />
                  </mat-form-field>
                </div>
              </div>
            </div>

            <!-- ----------------------------Fourth Row --------------------------------------->

            <div class="row justify-content-center row-4">
              <div class="col-lg-2 col-md-2 input-col-2">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Booking Amount</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="bookingAmount"
                    required
                    readonly
                  />
                </mat-form-field>
              </div>

              <div class="col-lg-2 col-md-2 input-col-2">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Balance Amount</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="balanceAmount"
                    required
                    readonly
                  />
                </mat-form-field>
              </div>

              <div class="col-lg-2 col-md-2 input-col-2">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Total Amount</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="totalAmount"
                    required
                    readonly
                  />
                </mat-form-field>
              </div>
            </div>

            <!-- ----------------------------Fifth Row --------------------------------------->

            <div class="row justify-content-center row-5">
              <!-- Discount + Type -->
              <div class="col-lg-2 col-md-2 input-col-3">
                <div class="mb-2">
                  <div class="input-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Discount"
                      formControlName="discount"
                      (change)="
                        calculateTotalAmountAndBalaenceAmontAfterDiscount()
                      "
                    />
                    <span
                      class="input-group-text no-select"
                      formControlName="discountType"
                      (click)="percentOrAmount()"
                      style="cursor: pointer; width: 40px"
                      >{{ discountType }}</span
                    >
                  </div>
                </div>
              </div>
              <!-- Actual Amount -->
              <div class="col-lg-2 col-md-2 input-col-3" *ngIf="!isActivities">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Actual Amount</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="actualAmount"
                    required
                    (change)="calExtraAmount()"
                  />
                </mat-form-field>
              </div>

              <!-- Security Deposit -->
              <div class="col-lg-2 col-md-2 input-col-3" *ngIf="!isActivities">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Security Deposit</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="securityAmount"
                    required
                    (change)="calculatePayToCompanyAndPayToVendor()"
                  />
                </mat-form-field>
              </div>
            </div>

            <!-- <div class="row">
            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
              </div>
            </div>

            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
               <mat-form-field appearance="outline">
    <mat-label>Pickup Location</mat-label>
    <mat-select formControlName="pickupLocation" class="select custom-mat-select" required>
                  <app-mat-select-search (filteredList)="setFilterList($event, 'pickLocation')"
                    [originalList]="pickLocationList" [categoryName]="'pickLocation'"></app-mat-select-search> 
                  <mat-option *ngFor="let pickList of filteredPickLocationList" [value]="pickList.location">
                    {{ pickList.location }}
                  </mat-option>
                </mat-select>
  </mat-form-field>
              </div>
            </div>

            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
                  <mat-form-field appearance="outline">
    <mat-label>Pickup Point</mat-label>
    <input matInput type="text" class="form-control" name="pickupPoint" formControlName="pickupPoint" required>
  </mat-form-field>
              </div>
            </div>

            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
                <mat-form-field appearance="outline">
    <mat-label>Drop Location</mat-label>
    <mat-select formControlName="dropLocation" class="select custom-mat-select"
                   required>
                  <app-mat-select-search (filteredList)="setFilterList($event, 'dropLocation')"
                    [originalList]="dropLocationList" [categoryName]="'dropLocation'"></app-mat-select-search>
                  <mat-option *ngFor="let dropList of filteredDropLocationList" [value]="dropList.location">
                    {{ dropList.location }}
                  </mat-option>
                </mat-select>
  </mat-form-field>

              </div>
            </div>

            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
                <mat-form-field appearance="outline">
    <mat-label>Drop Point</mat-label>
    <input matInput type="text" class="form-control" formControlName="dropPoint" required>
  </mat-form-field>

              </div>
            </div>
          </div> -->
            <!-- 
          <div class="row">
             <div class="col-lg-2 col-md-2">
              <div class="mb-1">
              </div>
            </div>

            <div class="col-lg-2 col-md-2">
              <div class="mb-1">
<mat-form-field appearance="outline">
    <mat-label>Quantity</mat-label>
    <input matInput type="number" class="form-control" formControlName="quantity" min="0" required (change)="calculateTotalAmount()" >
  </mat-form-field>
              </div>
            </div>

            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
                  <mat-form-field appearance="outline">
    <mat-label>Company Rate</mat-label>
    <input matInput type="text" class="form-control" placeholder="0" formControlName="companyRate" required
                  (change)="calculateTotalAmount()" >
  </mat-form-field>
              </div>
            </div>
            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
                  <mat-form-field appearance="outline">
    <mat-label>Vendor Rate</mat-label>
    <input matInput type="text" class="form-control" placeholder="0" formControlName="vendorRate" required
                  (change)="calculateTotalAmount()" >
  </mat-form-field>
              </div>
            </div>

            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
                  <mat-form-field appearance="outline">
    <mat-label>Delivery To Vendor</mat-label>
    <input matInput type="text" class="form-control" placeholder="0" formControlName="deliveryAmountToVendor" required
                  (change)="calculateTotalAmount()" >
  </mat-form-field>
              </div>
            </div>

            <div class="col-lg-2 col-md-2"></div>
          </div> -->

            <!-- <div class="row">
            <div class="col-lg-2 col-md-2"></div>
            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
                
                <mat-form-field appearance="outline">
    <mat-label>Booking Amount</mat-label>
    <input matInput type="number" class="form-control" formControlName="bookingAmount" required readonly >
  </mat-form-field>
              </div>
            </div>

            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
        
                <mat-form-field appearance="outline">
    <mat-label>Balance Amount</mat-label>
    <input matInput type="number" class="form-control" formControlName="balanceAmount" required readonly >
  </mat-form-field>
              </div>
            </div>
            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
               
                <mat-form-field appearance="outline">
    <mat-label>Total Amount</mat-label>
    <input matInput type="number" class="form-control" formControlName="totalAmount" required readonly >
  </mat-form-field>
              </div>
            </div>
           
            <div class="col-lg-2 col-md-2">
              <div class="mb-2">
                
                  <mat-form-field appearance="outline">
    <mat-label>Discount</mat-label>
    <input matInput type="text" class="form-control" formControlName="discount"
                    (change)="calculateTotalAmountAndBalaenceAmontAfterDiscount()">
                  <span class="input-group-text no-select" formControlName="discountType" (click)="percentOrAmount()"
                    style="cursor: pointer; width: 40px;">{{discountType}}</span>
  </mat-form-field>
                 
              </div>
            </div>
          </div>
          

          <div class="row">
            <div class="col-lg-4 col-md-4"></div>
            <div class="col-lg-2 col-md-2" *ngIf="!isActivities">
              <div class="mb-2">
                
                  <mat-form-field appearance="outline">
    <mat-label>Actual Amount</mat-label>
    <input matInput type="text" class="form-control" placeholder="0" formControlName="actualAmount" required
                  (change)="calExtraAmount()" >
  </mat-form-field>
              </div>
            </div>
            <div class="col-lg-2 col-md-2" *ngIf="!isActivities">
              <div class="mb-2">
               
                   <mat-form-field appearance="outline">
    <mat-label>Security Amount</mat-label>
    <input matInput type="text" class="form-control" formControlName="securityAmount" required
                  (change)="calculatePayToCompanyAndPayToVendor()" >
  </mat-form-field>
              </div>
            </div>
          </div> -->

            <div class="row">
              <div class="col-lg-2 col-md-2"></div>
              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <mat-select
                    name="leadOrigine"
                    placeholder="Select Lead Origine"
                    formControlName="leadOrigine"
                    class="select"
                    placeholder="Select Lead Origine"
                  >
                    @for (listData of leadOrigine; track listData) {
                    <mat-option [value]="listData.name">
                      {{ listData.name }}
                    </mat-option>
                    }
                  </mat-select>
                </div>
              </div>
              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <mat-select
                    name="leadType"
                    formControlName="leadType"
                    placeholder="Select Lead Type"
                    class="select"
                  >
                    @for (listData of leadType; track listData) {
                    <mat-option [value]="listData.name">
                      {{ listData.name }}
                    </mat-option>
                    }
                  </mat-select>
                </div>
              </div>
              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <mat-select
                    name="status"
                    formControlName="status"
                    class="select"
                    placeholder="Select Status"
                  >
                    @for (listData of leadStatus; track listData) {
                    <mat-option [value]="listData.value">
                      {{ listData.name }}
                    </mat-option>
                    }
                  </mat-select>
                </div>
              </div>
              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <mat-select
                    formControlName="createdBy"
                    class="select custom-mat-select"
                    name="createdBy"
                    placeholder="Select Agent Name"
                  >
                    <mat-option
                      *ngFor="let user of userList"
                      [value]="user.loginId"
                    >
                      {{ user.firstName }}
                    </mat-option>
                  </mat-select>
                </div>
              </div>
              <div class="col-lg-2 col-md-2"></div>
            </div>
            <div class="row">
              <div class="col-lg-2 col-md-2"></div>
            </div>
          </div>

          <div class="section customer-details-section wider-spacing">
            <div class="card-title-head">
              <h6>
                <span><i class="feather icon-info feather-edit"></i></span
                >Customer Details
              </h6>
            </div>
            <div class="row">
              <div class="col-lg-3 col-md-3">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Custome Name"
                    formControlName="customeName"
                    required
                  />
                </div>
              </div>
              <div class="col-lg-1 col-md-3">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Dial Code"
                    formControlName="countryDialCode"
                    required
                  />
                </div>
              </div>
              <div class="col-lg-2 col-md-6">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Mobile"
                    formControlName="customerMobile"
                    required
                  />
                </div>
              </div>
              <div class="col-lg-2 col-md-6">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Alternate Mobile"
                    formControlName="customerAlternateMobile"
                  />
                </div>
              </div>
              <div class="col-lg-4 col-md-6">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Customer EmailId"
                    formControlName="customerEmailId"
                    required
                  />
                </div>
              </div>
            </div>
          </div>

          <div class="section additional-info-section">
            <div
              class="custom-card-title-head"
              [ngStyle]="{ 'border-bottom': 'none', 'box-shadow': 'none' }"
            >
              <h6 class="additional-info-text">
                <span
                  ><i
                    class="feather icon-info feather-edit custom-icon"
                  ></i></span
                >Additional Info
              </h6>
            </div>
            <div class="row">
              <p></p>
              <div class="col-lg-4 col-md-4">
                <div class="input-container">
                  <label for="reports"><b>Report: </b></label>
                  {{ vendorRate }}
                </div>
                <div class="input-container">
                  <label for="delivery"><b>Delivery: </b></label>
                  {{ deliveryAmtToVendor }}
                </div>
                <div class="input-container">
                  <label for="remarks" class="requiredField"
                    ><b>Remarks:</b></label
                  >
                  <input
                    type="text"
                    id="remarks"
                    class="form-control no-border"
                    placeholder=" Write Remarks..."
                    formControlName="remarks"
                    required
                  />
                </div>
                <div class="input-container">
                  <label for="pay-to-vendor"><b>Pay to vendor:</b></label>
                  {{ payToVendor }}
                </div>
                <div class="input-container">
                  <label for="pay-to-company"><b>Pay to company:</b></label>
                </div>
              </div>

              <div class="col-lg-4 col-md-4 vl">
                <input
                  class="form-check-input"
                  type="radio"
                  name="notesType"
                  [value]="'Notes'"
                  id="notes1"
                  (change)="onNotesTypeChange('Notes')"
                  [checked]="notesType === 'Notes'"
                />
                <label
                  class="form-check-label"
                  for="notes1"
                  style="margin-right: 20px; margin-left: 20px"
                >
                  Notes
                </label>

                <input
                  class="form-check-input"
                  type="radio"
                  name="notesType"
                  [value]="'Reminders'"
                  id="notes2"
                  (change)="onNotesTypeChange('Reminders')"
                  [checked]="notesType === 'Reminders'"
                />
                <label
                  class="form-check-label"
                  for="notes2"
                  style="margin-left: 20px"
                >
                  Reminders </label
                ><br /><br />

                <div *ngIf="notesType === 'Notes'">
                  <textarea
                    class="form-control no-border"
                    name="notes"
                    formControlName="notes"
                    rows="4"
                    placeholder="___________________________________________________________________________________________________________________________________________________________________________________________________________"
                  ></textarea>
                </div>

                <div *ngIf="notesType === 'Reminders'">
                  <input
                    class="form-control datetimepicker"
                    placeholder="Choose Date"
                    formControlName="followupDate"
                    bsDatepicker
                    container=".date-input2"
                    [bsConfig]="{
                      dateInputFormat: 'DD/MM/YYYY',
                      minDate: minDate,
                      maxDate: maxDate
                    }"
                  />
                  <textarea
                    class="form-control no-border"
                    name="notes"
                    formControlName="notes"
                    rows="2"
                    placeholder="___________________________________________________________________________________________"
                  ></textarea>
                </div>
              </div>

              <div class="col-lg-4 col-md-4 vl">
                <h4>Records</h4>
                <textarea
                  class="form-control no-border"
                  name="records"
                  formControlName="records"
                  rows="4"
                  placeholder="No Records Found"
                ></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="text-mid mb-3">
        <button type="submit" class="btn btn-submit">Save Lead</button>
      </div>
      <div class="text-mid mb-3"></div>
    </div>
  </form>
</div>

<!-- --------------------------------------------------------------- This Is Activity Div -------------------------------------------------------------------------- -->
<!-- --------------------------------------------------------------- This Is Activity Div -------------------------------------------------------------------------- -->
<div *ngIf="selectedOption === 'activity'">
  <form [formGroup]="addLeadForm" (ngSubmit)="submitLeadForm()">
    <div class="card">
      <div class="card-body">
        <div class="new-employee-field">
          <br />

          <div class="vehicle-section">
            <!-- ----------------------------First Row --------------------------------------->
            <div class="row justify-content-center mb-3 row-1">
              <!-- <div class="col-lg-4 col-md-4 ">
                <div class="mb-3">
                  <div class="round-input sample-color height-test d-flex wrapper">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search Vehicle or activities" class="input-inside-element"
                      required />
                  </div>
                </div>
              </div> -->
              <div class="col-lg-3 col-md-3">
                <div class="mb-3">
                  <mat-select
                    formControlName="categoryId"
                    class="select custom-mat-select no-border input-inside-element form-control"
                    placeholder="Select a Package"
                    (selectionChange)="getSubCategory($event.value)"
                    required
                  >
                    <app-mat-select-search
                      (filteredList)="setFilterList($event, 'category')"
                      [originalList]="filteredCategoryList"
                      [categoryName]="'pickLocation'"
                    ></app-mat-select-search>
                    <mat-option
                      *ngFor="let cate of filteredCategoryList"
                      [value]="cate"
                    >
                      {{ cate.category }}
                    </mat-option>
                  </mat-select>
                  <!-- </div> -->
                </div>
              </div>

              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <mat-select
                    formControlName="subCategoryId"
                    class="select custom-mat-select no-border input-inside-element"
                    placeholder="Select Variant"
                    (selectionChange)="setSecurityAndVendorRate($event)"
                    required
                  >
                    <mat-option
                      *ngFor="let subCate of filteredSubCategoryList"
                      [value]="subCate"
                    >
                      {{ subCate.subCategory }}
                    </mat-option>
                  </mat-select>
                </div>
              </div>

              <div class="col-lg-3 col-md-5">
                <div class="mb-3">
                  <div class="activity-datetime-container">
                    <div class="activity-section">
                      <label class="label">Activity Date</label>
                      <input
                        type="date"
                        [(ngModel)]="activityDate"
                        class="form-control"
                        formControlName="date"
                        class="flat-input"
                      />
                      <!-- <input type="number" class="form-control" formControlName="date" min="0" required /> -->
                    </div>

                    <div class="divider"></div>

                    <div class="time-range">
                      <div class="flex flex-col">
                        <label class="label">Start Time</label>
                      <input
                        type="time"
                        step="900"

                        [(ngModel)]="startTime"
                        formControlName="startTime"
                        (change)="adjustToNearest15Min($event, 'startTime')"
                        class="flat-input"
                      />
                      </div>
                      <div class="flex flex-col">
                        <label class="label">End Time</label>

                      <input
                        type="time"
                        step="900"
                        [(ngModel)]="endTime"
                        formControlName="EndTime"
                        (change)="adjustToNearest15Min($event, 'endTime')"
                        class="flat-input"
                      />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ----------------------------Additional Row --------------------------------------->
            <div class="container">
              <div class="radio-class">
                <label class="radio-option">
                  <input
                    type="radio"
                    name="locationType"
                    [(ngModel)]="locationType"
                    value="self"
                  />
                  <span class="custom-radio"></span>
                  <span class="ml-2">Self</span>
                </label>

                <label class="radio-option">
                  <input
                    type="radio"
                    name="locationType"
                    [(ngModel)]="locationType"
                    value="pandd"
                  />
                  <span class="custom-radio"></span>
                  <span class="ml-2">P&D</span>
                </label>
              </div>

              <div class="col-lg-2 col-md-2 input-col-2">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Location</mat-label>
                  <input matInput type="text" required />
                </mat-form-field>
              </div>
            </div>

            <!-- ----------------------------Second Row --------------------------------------->

            <div class="container">
              <div class="row justify-content-center row-2">
                <!-- Adult Quantity -->
                <div class="col-lg-2 col-md-2 input-col-2">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Adult Quantity</mat-label>
                    <input
                      matInput
                      type="number"
                      formControlName="quantity"
                      min="0"
                      required
                      (change)="calculateTotalAmountOfActivites()"
                    />
                  </mat-form-field>
                </div>

                <!-- Kid Quantity -->
                <div class="col-lg-2 col-md-2 input-col-2">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Kid Quantity</mat-label>
                    <input
                      matInput
                      type="number"
                      formControlName="childrenQuantity"
                      min="0"
                      required
                      (change)="calculateTotalAmountOfActivites()"
                    />
                  </mat-form-field>
                </div>

                <!-- Infant Quantity -->
                <div class="col-lg-2 col-md-2 input-col-2">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Infant Quantity</mat-label>
                    <input
                      matInput
                      type="number"
                      formControlName="infantQuantity"
                      min="0"
                      required
                      (change)="calculateTotalAmountOfActivites()"
                    />
                  </mat-form-field>
                </div>
              </div>
            </div>

            <!-- ----------------------------Thrird Row --------------------------------------->
            <div class="container">
              <div class="row justify-content-center row-3">
                <!-- Adult Company Rate -->
                <div class="col-lg-2 col-md-2 input-col-2">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Adult Company Rate</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="companyRate"
                      required
                      (change)="calculateTotalAmountOfActivites()"
                    />
                  </mat-form-field>
                </div>

                <!-- Adult Vendor Rate (1) -->
                <div class="col-lg-2 col-md-2 input-col-2">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Adult Vendor Rate</mat-label>
                    <input matInput type="text" />
                  </mat-form-field>
                </div>

                <!-- Adult Vendor Rate (2) -->
                <div class="col-lg-2 col-md-2 input-col-2">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Adult Vendor Rate</mat-label>
                    <input matInput type="text" />
                  </mat-form-field>
                </div>

                <!-- Kid Vendor Rate -->
                <div class="col-lg-2 col-md-2 input-col-2">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Kid Vendor Rate</mat-label>
                    <input matInput type="text" />
                  </mat-form-field>
                </div>
              </div>
            </div>

            <!-- ----------------------------Fourth Row --------------------------------------->

            <div class="row justify-content-center row-4">
              <!-- Booking Amount -->
              <div class="col-lg-2 col-md-2 input-col-2">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Booking Amount</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="bookingAmount"
                    required
                    readonly
                  />
                </mat-form-field>
              </div>

              <!-- Balance Amount -->
              <div class="col-lg-2 col-md-2 input-col-2">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Balance Amount</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="balanceAmount"
                    required
                    readonly
                  />
                </mat-form-field>
              </div>

              <!-- Total Amount -->
              <div class="col-lg-2 col-md-2 input-col-2">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Total Amount</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="totalAmount"
                    required
                    readonly
                  />
                </mat-form-field>
              </div>
            </div>

            <!-- </div> -->

            <!-- ----------------------------Fifth Row --------------------------------------->

            <div class="row justify-content-center row-5">
              <!-- Discount with suffix (dynamic ₹ or %) -->
              <div class="col-lg-2 col-md-2 input-col-3">
                <div class="mb-2">
                  <div class="input-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Discount"
                      formControlName="discount"
                      (change)="
                        calculateTotalAmountAndBalaenceAmontAfterDiscount()
                      "
                    />
                    <span
                      class="input-group-text no-select"
                      formControlName="discountType"
                      (click)="percentOrAmount()"
                      style="cursor: pointer; width: 40px"
                      >{{ discountType }}</span
                    >
                  </div>
                </div>
              </div>

              <!-- Actual Paid Amount -->
              <div class="col-lg-2 col-md-2 input-col-2">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Actual Paid Amount</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="actualAmount"
                    required
                    (change)="calExtraAmount()"
                  />
                </mat-form-field>
              </div>
            </div>

            <!-------------------------------Sixth Row --------------------------------------->

            <div class="row">
              <div class="col-lg-2 col-md-2"></div>
              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <mat-select
                    name="leadOrigine"
                    placeholder="Select Lead Origine"
                    formControlName="leadOrigine"
                    class="select"
                    placeholder="Select Lead Origine"
                  >
                    @for (listData of leadOrigine; track listData) {
                    <mat-option [value]="listData.name">
                      {{ listData.name }}
                    </mat-option>
                    }
                  </mat-select>
                </div>
              </div>
              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <mat-select
                    name="leadType"
                    formControlName="leadType"
                    placeholder="Select Lead Type"
                    class="select"
                  >
                    @for (listData of leadType; track listData) {
                    <mat-option [value]="listData.name">
                      {{ listData.name }}
                    </mat-option>
                    }
                  </mat-select>
                </div>
              </div>
              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <mat-select
                    name="status"
                    formControlName="status"
                    class="select"
                    placeholder="Select Status"
                  >
                    @for (listData of leadStatus; track listData) {
                    <mat-option [value]="listData.value">
                      {{ listData.name }}
                    </mat-option>
                    }
                  </mat-select>
                </div>
              </div>
              <div class="col-lg-2 col-md-2">
                <div class="mb-2">
                  <mat-select
                    formControlName="createdBy"
                    class="select custom-mat-select"
                    name="createdBy"
                    placeholder="Select Agent Name"
                  >
                    <mat-option
                      *ngFor="let user of userList"
                      [value]="user.loginId"
                    >
                      {{ user.firstName }}
                    </mat-option>
                  </mat-select>
                </div>
              </div>
              <div class="col-lg-2 col-md-2"></div>
            </div>
          </div>

          <div class="section customer-details-section wider-spacing">
            <div class="card-title-head">
              <h6>
                <span><i class="feather icon-info feather-edit"></i></span
                >Customer Details
              </h6>
            </div>
            <div class="row">
              <div class="col-lg-3 col-md-3">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Custome Name"
                    formControlName="customeName"
                    required
                  />
                </div>
              </div>
              <div class="col-lg-1 col-md-3">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Dial Code"
                    formControlName="countryDialCode"
                    required
                  />
                </div>
              </div>
              <div class="col-lg-2 col-md-6">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Mobile"
                    formControlName="customerMobile"
                    required
                  />
                </div>
              </div>
              <div class="col-lg-2 col-md-6">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Alternate Mobile"
                    formControlName="customerAlternateMobile"
                  />
                </div>
              </div>
              <div class="col-lg-4 col-md-6">
                <div class="mb-3">
                  <input
                    type="text"
                    class="form-control bottom-border"
                    placeholder="Customer EmailId"
                    formControlName="customerEmailId"
                    required
                  />
                </div>
              </div>
            </div>
          </div>

          <!-- Additional Info Section -->
          <div class="section additional-info-section">
            <div
              class="custom-card-title-head"
              [ngStyle]="{ 'border-bottom': 'none', 'box-shadow': 'none' }"
            >
              <h6 class="additional-info-text">
                <span
                  ><i
                    class="feather icon-info feather-edit custom-icon"
                  ></i></span
                >Additional Info
              </h6>
            </div>
            <div class="row">
              <p></p>
              <div class="col-lg-4 col-md-4">
                <div class="input-container">
                  <label for="reports"><b>Report: </b></label>
                  {{ vendorRate }}
                </div>
                <div class="input-container">
                  <label for="delivery"><b>Delivery: </b></label>
                  {{ deliveryAmtToVendor }}
                </div>
                <div class="input-container">
                  <label for="remarks" class="requiredField"
                    ><b>Remarks:</b></label
                  >
                  <input
                    type="text"
                    id="remarks"
                    class="form-control no-border"
                    placeholder=" Write Remarks..."
                    formControlName="remarks"
                    required
                  />
                </div>
                <div class="input-container">
                  <label for="pay-to-vendor"><b>Pay to vendor:</b></label>
                  {{ payToVendor }}
                </div>
                <div class="input-container">
                  <label for="pay-to-company"><b>Pay to company:</b></label>
                </div>
              </div>

              <div class="col-lg-4 col-md-4 vl custom-padding">
                <input
                  class="form-check-input"
                  type="radio"
                  name="notesType"
                  [value]="'Notes'"
                  id="notes1"
                  (change)="onNotesTypeChange('Notes')"
                  [checked]="notesType === 'Notes'"
                />
                <label
                  class="form-check-label"
                  for="notes1"
                  style="margin-right: 20px; margin-left: 20px"
                >
                  Notes
                </label>

                <input
                  class="form-check-input"
                  type="radio"
                  name="notesType"
                  [value]="'Reminders'"
                  id="notes2"
                  (change)="onNotesTypeChange('Reminders')"
                  [checked]="notesType === 'Reminders'"
                />
                <label
                  class="form-check-label"
                  for="notes2"
                  style="margin-left: 20px"
                >
                  Reminders </label
                ><br /><br />

                <div *ngIf="notesType === 'Notes'">
                  <textarea
                    class="form-control no-border"
                    name="notes"
                    formControlName="notes"
                    rows="4"
                    placeholder="___________________________________________________________________________________________________________________________________________________________________________________________________________"
                  ></textarea>
                </div>

                <div *ngIf="notesType === 'Reminders'">
                  <input
                    class="form-control datetimepicker"
                    placeholder="Choose Date"
                    formControlName="followupDate"
                    bsDatepicker
                    container=".date-input2"
                    [bsConfig]="{
                      dateInputFormat: 'DD/MM/YYYY',
                      minDate: minDate,
                      maxDate: maxDate
                    }"
                  />
                  <textarea
                    class="form-control no-border"
                    name="notes"
                    formControlName="notes"
                    rows="2"
                    placeholder="___________________________________________________________________________________________"
                  ></textarea>
                </div>
              </div>

              <div class="col-lg-4 col-md-4 vl custom-padding">
                <h4>Records</h4>
                <textarea
                  class="form-control no-border"
                  name="records"
                  formControlName="records"
                  rows="4"
                  placeholder="No Records Found"
                ></textarea>
              </div>
            </div>
          </div>
          <!-- <div class="card-title-head">
            <h6>
              <span><i class="feather icon-info feather-edit"></i></span
              >Customer Details
            </h6>
          </div>
          <div class="row">
            <div class="col-lg-3 col-md-3">
              <div class="mb-3">
                <input
                  type="text"
                  class="form-control bottom-border"
                  placeholder="Custome Name"
                  formControlName="customeName"
                  required
                />
              </div>
            </div>
            <div class="col-lg-1 col-md-3">
              <div class="mb-3">
                <input
                  type="text"
                  class="form-control bottom-border"
                  placeholder="Dial Code"
                  formControlName="countryDialCode"
                  required
                />
              </div>
            </div>
            <div class="col-lg-2 col-md-6">
              <div class="mb-3">
                <input
                  type="text"
                  class="form-control bottom-border"
                  placeholder="Mobile"
                  formControlName="customerMobile"
                  required
                />
              </div>
            </div>
            <div class="col-lg-2 col-md-6">
              <div class="mb-3">
                <input
                  type="text"
                  class="form-control bottom-border"
                  placeholder="Alternate Mobile"
                  formControlName="customerAlternateMobile"
                />
              </div>
            </div>
            <div class="col-lg-4 col-md-6">
              <div class="mb-3">
                <input
                  type="text"
                  class="form-control bottom-border"
                  placeholder="Customer EmailId"
                  formControlName="customerEmailId"
                  required
                />
              </div>
            </div>
          </div>

          <div class="row">
            <p></p>
            <div class="col-lg-4 col-md-4">
              <div class="input-container">
                <label for="reports"><b>Report: </b></label>
                {{ vendorRate }}
              </div>
              <div class="input-container">
                <label for="delivery"><b>Delivery: </b></label>
                {{ deliveryAmtToVendor }}
              </div>
              <div class="input-container">
                <label for="remarks" class="requiredField"
                  ><b>Remarks:</b></label
                >
                <input
                  type="text"
                  id="remarks"
                  class="form-control no-border"
                  placeholder=" Write Remarks..."
                  formControlName="remarks"
                  required
                />
              </div>
              <div class="input-container">
                <label for="pay-to-vendor"><b>Pay to vendor:</b></label>
                {{ payToVendor }}
              </div>
              <div class="input-container">
                <label for="pay-to-company"><b>Pay to company:</b></label>
              </div>
            </div>

            <div class="col-lg-4 col-md-4 vl">
              <input
                class="form-check-input"
                type="radio"
                name="notesType"
                [value]="'Notes'"
                id="notes1"
                (change)="onNotesTypeChange('Notes')"
                [checked]="notesType === 'Notes'"
              />
              <label
                class="form-check-label"
                for="notes1"
                style="margin-right: 20px; margin-left: 20px"
              >
                Notes
              </label>

              <input
                class="form-check-input"
                type="radio"
                name="notesType"
                [value]="'Reminders'"
                id="notes2"
                (change)="onNotesTypeChange('Reminders')"
                [checked]="notesType === 'Reminders'"
              />
              <label
                class="form-check-label"
                for="notes2"
                style="margin-left: 20px"
              >
                Reminders </label
              ><br /><br />

              <div *ngIf="notesType === 'Notes'">
                <textarea
                  class="form-control no-border"
                  name="notes"
                  formControlName="notes"
                  rows="4"
                  placeholder="___________________________________________________________________________________________________________________________________________________________________________________________________________"
                ></textarea>
              </div>

              <div *ngIf="notesType === 'Reminders'">
                <input
                  class="form-control datetimepicker"
                  placeholder="Choose Date"
                  formControlName="followupDate"
                  bsDatepicker
                  container=".date-input2"
                  [bsConfig]="{
                    dateInputFormat: 'DD/MM/YYYY',
                    minDate: minDate,
                    maxDate: maxDate
                  }"
                />
                <textarea
                  class="form-control no-border"
                  name="notes"
                  formControlName="notes"
                  rows="2"
                  placeholder="___________________________________________________________________________________________"
                ></textarea>
              </div>
            </div>

            <div class="col-lg-4 col-md-4 vl">
              <h4>Records</h4>
              <textarea
                class="form-control no-border"
                name="records"
                formControlName="records"
                rows="4"
                placeholder="No Records Found"
              ></textarea>
            </div>
          </div> -->
        </div>
      </div>
      <!-- <div class="text-mid mb-3"></div> -->
    </div>

    <div class="text-mid mb-3">
      <button type="submit" class="btn btn-submit">Save Lead</button>
    </div>
  </form>
</div>
